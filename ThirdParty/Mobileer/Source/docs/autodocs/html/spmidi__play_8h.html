<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>spmidi.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
<body>
<table WIDTH="100%" cellpadding="2" cellspacing="0" border="2">
<tr>
<td BGCOLOR="#FFF8DD" ><h1 align="center">Mobileer MIDI Synthesizer - Reference Manual</h1>
  <center>
    <h3>CONFIDENTIAL and PROPRIETARY - &copy; 2002-5 <a href="http://www.mobileer.com/">Mobileer</a>,
      All Rights Reserved </h3>
  </center>
</td>
</tr>
</table>
<center>
<h3>
<a href="../../index.html">Return to Mobileer Documentation Home</a>
</h3>
</center>
<!-- Generated by Doxygen 1.3 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>spmidi_play.h File Reference</h1><code>#include "<a class="el" href="spmidi_8h-source.html">spmidi.h</a>"</code><br>
<code>#include "<a class="el" href="spmidi__util_8h-source.html">spmidi_util.h</a>"</code><br>

<p>
<a href="spmidi__play_8h-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="spmidi__play_8h.html#a0">SPMUTIL_OUTPUT_MONO</a>&nbsp;&nbsp;&nbsp;(1)</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="spmidi__play_8h.html#a1">SPMUTIL_OUTPUT_STEREO</a>&nbsp;&nbsp;&nbsp;(2)</td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="spmidi__play_8h.html#a2">SPMUtil_Start</a> (<a class="el" href="spmidi_8h.html#a18">SPMIDI_Context</a> **spmidiContextPtr, int sampleRate, const char *fileName, int samplesPerFrame)</td></tr>
<tr><td>&nbsp;</td><td><em class="mdesc">Start the SPMIDI Synthesizer and call <a class="el" href="spmidi__play_8h.html#a3">SPMUtil_StartVirtualAudio()</a>.</em> <a href="#a2"></a><em></em><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="spmidi__play_8h.html#a3">SPMUtil_StartVirtualAudio</a> (int sampleRate, const char *fileName, int samplesPerFrame)</td></tr>
<tr><td>&nbsp;</td><td><em class="mdesc">Open an virtual audio output stream that may be a WAV file or an audio hardware device.</em> <a href="#a3"></a><em></em><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="spmidi__play_8h.html#a4">SPMUtil_WriteVirtualAudio</a> (short *<a class="el" href="qa__alltypes_8c.html#a12">samples</a>, int samplesPerFrame, int numFrames)</td></tr>
<tr><td>&nbsp;</td><td><em class="mdesc">Write a buffer full of audio samples to the audio output stream.</em> <a href="#a4"></a><em></em><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="spmidi__play_8h.html#a5">SPMUtil_StopVirtualAudio</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><em class="mdesc">CLose whatever was opened by <a class="el" href="spmidi__play_8h.html#a3">SPMUtil_StartVirtualAudio()</a>.</em> <a href="#a5"></a><em></em><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="spmidi__play_8h.html#a6">SPMUtil_PlayBuffers</a> (<a class="el" href="spmidi_8h.html#a18">SPMIDI_Context</a> *spmidiContext, int numBuffers)</td></tr>
<tr><td>&nbsp;</td><td><em class="mdesc">Syntheize multiple buffers and write them to the audio output stream requested in <a class="el" href="spmidi__play_8h.html#a2">SPMUtil_Start()</a>.</em> <a href="#a6"></a><em></em><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="spmidi__play_8h.html#a7">SPMUtil_PlayMilliseconds</a> (<a class="el" href="spmidi_8h.html#a18">SPMIDI_Context</a> *spmidiContext, int msec)</td></tr>
<tr><td>&nbsp;</td><td><em class="mdesc">Play enough buffers to sleep approximately msec milliseconds.</em> <a href="#a7"></a><em></em><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="spmidi__play_8h.html#a8">SPMUtil_PlayFileBuffer</a> (<a class="el" href="midifile__player_8h.html#a0">MIDIFilePlayer</a> *player, <a class="el" href="spmidi_8h.html#a18">SPMIDI_Context</a> *spmidiContext)</td></tr>
<tr><td>&nbsp;</td><td><em class="mdesc">Advance the track players forward in the file by a time corresponding to the given number of audio frames.</em> <a href="#a8"></a><em></em><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="spmidi__play_8h.html#a9">SPMUtil_Stop</a> (<a class="el" href="spmidi_8h.html#a18">SPMIDI_Context</a> *spmidiContext)</td></tr>
<tr><td>&nbsp;</td><td><em class="mdesc">Stop the synthesizer and close the audio output device.</em> <a href="#a9"></a><em></em><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="spmidi__play_8h.html#a10">SPMUtil_StartAsync</a> (<a class="el" href="spmidi_8h.html#a18">SPMIDI_Context</a> **contextPtr, int sampleRate)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="spmidi__play_8h.html#a11">SPMUtil_StopAsync</a> (<a class="el" href="spmidi_8h.html#a18">SPMIDI_Context</a> *spmidiContext)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="spmidi__play_8h.html#a12">SPMUtil_WriteByteAsync</a> (int data)</td></tr>
<tr><td>&nbsp;</td><td><em class="mdesc">Write a MIDI byte to a FIFO, which will be read and processed by the background audio/MIDI thread.</em> <a href="#a12"></a><em></em><br><br></td></tr>
</table>
<hr><h2>Define Documentation</h2>
<a name="a0" doxytag="spmidi_play.h::SPMUTIL_OUTPUT_MONO"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SPMUTIL_OUTPUT_MONO&nbsp;&nbsp;&nbsp;(1)
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a1" doxytag="spmidi_play.h::SPMUTIL_OUTPUT_STEREO"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SPMUTIL_OUTPUT_STEREO&nbsp;&nbsp;&nbsp;(2)
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a name="a6" doxytag="spmidi_play.h::SPMUtil_PlayBuffers"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int SPMUtil_PlayBuffers </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="spmidi_8h.html#a18">SPMIDI_Context</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>spmidiContext</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>numBuffers</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Syntheize multiple buffers and write them to the audio output stream requested in <a class="el" href="spmidi__play_8h.html#a2">SPMUtil_Start()</a>.
<p>
<dl compact><dt><b>Returns:</b></dt><dd>result from <a class="el" href="spmidi_8h.html#a36">SPMIDI_ReadFrames()</a>.</dd></dl>
    </td>
  </tr>
</table>
<a name="a8" doxytag="spmidi_play.h::SPMUtil_PlayFileBuffer"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int SPMUtil_PlayFileBuffer </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="midifile__player_8h.html#a0">MIDIFilePlayer</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>player</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="spmidi_8h.html#a18">SPMIDI_Context</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>spmidiContext</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Advance the track players forward in the file by a time corresponding to the given number of audio frames.
<p>
Generate one buffers worth of data and write it to the output stream. <dl compact><dt><b>Returns:</b></dt><dd>0 if more events available to play. 1 if finished. Negative if an error occurs.</dd></dl>
    </td>
  </tr>
</table>
<a name="a7" doxytag="spmidi_play.h::SPMUtil_PlayMilliseconds"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int SPMUtil_PlayMilliseconds </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="spmidi_8h.html#a18">SPMIDI_Context</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>spmidiContext</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>msec</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Play enough buffers to sleep approximately msec milliseconds.
<p>
This is not an accurate timer. Only use it for simple tests. <dl compact><dt><b>Returns:</b></dt><dd>the number of buffers played</dd></dl>
    </td>
  </tr>
</table>
<a name="a2" doxytag="spmidi_play.h::SPMUtil_Start"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int SPMUtil_Start </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="spmidi_8h.html#a18">SPMIDI_Context</a> **&nbsp;</td>
          <td class="mdname" nowrap> <em>spmidiContextPtr</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>sampleRate</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>fileName</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>samplesPerFrame</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Start the SPMIDI Synthesizer and call <a class="el" href="spmidi__play_8h.html#a3">SPMUtil_StartVirtualAudio()</a>.
<p>
    </td>
  </tr>
</table>
<a name="a10" doxytag="spmidi_play.h::SPMUtil_StartAsync"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int SPMUtil_StartAsync </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="spmidi_8h.html#a18">SPMIDI_Context</a> **&nbsp;</td>
          <td class="mdname" nowrap> <em>contextPtr</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>sampleRate</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a3" doxytag="spmidi_play.h::SPMUtil_StartVirtualAudio"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int SPMUtil_StartVirtualAudio </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>sampleRate</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>fileName</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>samplesPerFrame</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Open an virtual audio output stream that may be a WAV file or an audio hardware device.
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>sampleRate</em>&nbsp;</td><td>Synthesis rate in Hertz. </td></tr>
    <tr><td valign=top><em>fileName</em>&nbsp;</td><td>If NULL then output to the default audio device. Otherwise output 16 bit audio to the named WAV file. Recommend ".wav" suffix. </td></tr>
    <tr><td valign=top><em>samplesPerFrame</em>&nbsp;</td><td>May be 1 for mono or 2 for stereo.</td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a name="a9" doxytag="spmidi_play.h::SPMUtil_Stop"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int SPMUtil_Stop </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="spmidi_8h.html#a18">SPMIDI_Context</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>spmidiContext</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Stop the synthesizer and close the audio output device.
<p>
    </td>
  </tr>
</table>
<a name="a11" doxytag="spmidi_play.h::SPMUtil_StopAsync"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int SPMUtil_StopAsync </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="spmidi_8h.html#a18">SPMIDI_Context</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>spmidiContext</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a5" doxytag="spmidi_play.h::SPMUtil_StopVirtualAudio"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int SPMUtil_StopVirtualAudio </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
CLose whatever was opened by <a class="el" href="spmidi__play_8h.html#a3">SPMUtil_StartVirtualAudio()</a>.
<p>
    </td>
  </tr>
</table>
<a name="a12" doxytag="spmidi_play.h::SPMUtil_WriteByteAsync"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int SPMUtil_WriteByteAsync </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>data</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Write a MIDI byte to a FIFO, which will be read and processed by the background audio/MIDI thread.
<p>
Using this will prevent race conditions between the foreground thread and the audio/MIDI callback. Use instead of SPMIDI_WriteCommand. Return 0 if successful, or -1 if buffer full.    </td>
  </tr>
</table>
<a name="a4" doxytag="spmidi_play.h::SPMUtil_WriteVirtualAudio"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int SPMUtil_WriteVirtualAudio </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">short *&nbsp;</td>
          <td class="mdname" nowrap> <em>samples</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>samplesPerFrame</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>numFrames</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Write a buffer full of audio samples to the audio output stream.
<p>
    </td>
  </tr>
</table>
<hr><address style="align: right;"><small>Generated on Mon May 22 19:06:34 2006 for SPMIDI by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3 </small></address>
</body>
</html>
