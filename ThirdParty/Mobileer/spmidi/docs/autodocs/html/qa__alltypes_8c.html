<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>spmidi.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
<body>
<table WIDTH="100%" cellpadding="2" cellspacing="0" border="2">
<tr>
<td BGCOLOR="#FFF8DD" ><h1 align="center">Mobileer MIDI Synthesizer - Reference Manual</h1>
  <center>
    <h3>CONFIDENTIAL and PROPRIETARY - &copy; 2002-5 <a href="http://www.mobileer.com/">Mobileer</a>,
      All Rights Reserved </h3>
  </center>
</td>
</tr>
</table>
<center>
<h3>
<a href="../../index.html">Return to Mobileer Documentation Home</a>
</h3>
</center>
<!-- Generated by Doxygen 1.5.3 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
  </ul>
</div>
<h1>qa_alltypes.c File Reference</h1><code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;math.h&gt;</code><br>
<code>#include &quot;<a class="el" href="spmidi_8h-source.html">spmidi/include/spmidi.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="spmidi__print_8h-source.html">spmidi/include/spmidi_print.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="spmidi__util_8h-source.html">spmidi/include/spmidi_util.h</a>&quot;</code><br>
<code>#include &quot;spmidi/engine/spmidi_host.h&quot;</code><br>
<code>#include &quot;<a class="el" href="spmidi__audio_8h-source.html">spmidi/include/spmidi_audio.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="spmidi__load_8h-source.html">spmidi/include/spmidi_load.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="song__player_8h-source.html">spmidi/include/song_player.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="qa__tools_8h-source.html">spmidi/qa/qa_tools.h</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_test_result__s.html">TestResult_s</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qa__alltypes_8c.html#c3c0b0baa1570729c6fcd30af66268a1">PRINT_EXPECTED</a>&nbsp;&nbsp;&nbsp;(1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qa__alltypes_8c.html#356cf44495ba997a53affcfdb1f386a0">TARGET_GENERIC</a>&nbsp;&nbsp;&nbsp;(1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qa__alltypes_8c.html#7729c89d21b0350124adfa89538f415f">TARGET_ARMDSP</a>&nbsp;&nbsp;&nbsp;(0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qa__alltypes_8c.html#923856e3b88a1a5ba1949351b9b232a0">TARGET_BLACKFIN</a>&nbsp;&nbsp;&nbsp;(0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qa__alltypes_8c.html#4b76a0c2859cfd819a343a780070ee2b">SAMPLE_RATE</a>&nbsp;&nbsp;&nbsp;(22050)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qa__alltypes_8c.html#8746ae57f53e99e184ab1e64e71d24c5">SAMPLES_PER_FRAME</a>&nbsp;&nbsp;&nbsp;(2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qa__alltypes_8c.html#f4f62216aa14e0407faa6631e9ec4c62">FRAMES_PER_BUFFER</a>&nbsp;&nbsp;&nbsp;(SPMIDI_MAX_FRAMES_PER_BUFFER)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qa__alltypes_8c.html#0496f614511efb835b8e80df7a0b18b5">SAMPLES_PER_BUFFER</a>&nbsp;&nbsp;&nbsp;(SAMPLES_PER_FRAME * FRAMES_PER_BUFFER)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qa__alltypes_8c.html#031ac8e7f2ac93d58120eba567db84da">EXPECTED_NUM_ALLOCATIONS</a>&nbsp;&nbsp;&nbsp;(19)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qa__alltypes_8c.html#5ce50c5b71de22d4b8cbb38f5a44a357">EXPECTED_BYTES_ALLOCATED</a>&nbsp;&nbsp;&nbsp;(9784 + (24 * SPMIDI_MAX_VOICES))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qa__alltypes_8c.html#ac028f4c15ac7f78a44be5db76cfbec7">NUM_BUFFERS</a>&nbsp;&nbsp;&nbsp;(sizeof(<a class="el" href="qa__alltypes_8c.html#78eb8890ba075685412f97c193161010">sExpectedResults</a>)/sizeof(<a class="el" href="struct_test_result__s.html">TestResult_t</a>))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qa__alltypes_8c.html#e536e8c32741d231578be7a34dffca08">TALLY_RESULT</a></td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef struct <br>
<a class="el" href="struct_test_result__s.html">TestResult_s</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qa__alltypes_8c.html#00d944d54908c5f77d7c34b4967464e6">TestResult_t</a></td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qa__alltypes_8c.html#21d599969311fb737cdceae4209da2a5">TestAllVoiceTypes</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generate a few buffers of MIDI and check the min, max and checksum.  <a href="#21d599969311fb737cdceae4209da2a5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qa__alltypes_8c.html#840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">short&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qa__alltypes_8c.html#a411f12301b370a95665045379fdae34">samples</a> [SAMPLES_PER_BUFFER]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qa__alltypes_8c.html#6b3b65392e849aa50e1a34ddd122fc45">QuickAllTypes</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qa__alltypes_8c.html#20e3e3e87c5869a46e9f042d9bfd3518">QuickAllTypes_size</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_test_result__s.html">TestResult_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qa__alltypes_8c.html#78eb8890ba075685412f97c193161010">sExpectedResults</a> []</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="5ce50c5b71de22d4b8cbb38f5a44a357"></a><!-- doxytag: member="qa_alltypes.c::EXPECTED_BYTES_ALLOCATED" ref="5ce50c5b71de22d4b8cbb38f5a44a357" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EXPECTED_BYTES_ALLOCATED&nbsp;&nbsp;&nbsp;(9784 + (24 * SPMIDI_MAX_VOICES))          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="031ac8e7f2ac93d58120eba567db84da"></a><!-- doxytag: member="qa_alltypes.c::EXPECTED_NUM_ALLOCATIONS" ref="031ac8e7f2ac93d58120eba567db84da" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EXPECTED_NUM_ALLOCATIONS&nbsp;&nbsp;&nbsp;(19)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="f4f62216aa14e0407faa6631e9ec4c62"></a><!-- doxytag: member="qa_alltypes.c::FRAMES_PER_BUFFER" ref="f4f62216aa14e0407faa6631e9ec4c62" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FRAMES_PER_BUFFER&nbsp;&nbsp;&nbsp;(SPMIDI_MAX_FRAMES_PER_BUFFER)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="ac028f4c15ac7f78a44be5db76cfbec7"></a><!-- doxytag: member="qa_alltypes.c::NUM_BUFFERS" ref="ac028f4c15ac7f78a44be5db76cfbec7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUM_BUFFERS&nbsp;&nbsp;&nbsp;(sizeof(<a class="el" href="qa__alltypes_8c.html#78eb8890ba075685412f97c193161010">sExpectedResults</a>)/sizeof(<a class="el" href="struct_test_result__s.html">TestResult_t</a>))          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="c3c0b0baa1570729c6fcd30af66268a1"></a><!-- doxytag: member="qa_alltypes.c::PRINT_EXPECTED" ref="c3c0b0baa1570729c6fcd30af66268a1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PRINT_EXPECTED&nbsp;&nbsp;&nbsp;(1)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Verify checksum, min and max on a few buffers of audio.<p>
Test a very short segment of audio by comparing a checksum, min and max against an expected result. This is designed for validating a Verilog simulation of a chip running the ME3000.<p>
The test uses a very small MXMF file that contains a 16 bit wavetable. it plays three notes, one each of type ME1000, ME2000 and ME3000.<p>
To calibrate the expected results, set PRINT_EXPECTED as (1) below. Then run the test on an accurate simulator using exactly the same settings in "spmidi_user_config.h". Also use the same orchestra, etc.<p>
Then update the expected results in this file and run the test on the target platform.<p>
You can disable the <a class="el" href="qa__64v_8c.html#3c04138a5bfe5d72780bb7e82a18e627" title="Load a song, play it multiple times (tearing down the song player between iterations)...">main()</a> function below and call <a class="el" href="qa__alltypes_8c.html#21d599969311fb737cdceae4209da2a5" title="Generate a few buffers of MIDI and check the min, max and checksum.">TestAllVoiceTypes()</a> from your own test harness.<p>
Author: Phil Burk, Robert Marsanyi Copyright 2005 Mobileer, PROPRIETARY and CONFIDENTIAL 
</div>
</div><p>
<a class="anchor" name="4b76a0c2859cfd819a343a780070ee2b"></a><!-- doxytag: member="qa_alltypes.c::SAMPLE_RATE" ref="4b76a0c2859cfd819a343a780070ee2b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SAMPLE_RATE&nbsp;&nbsp;&nbsp;(22050)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="0496f614511efb835b8e80df7a0b18b5"></a><!-- doxytag: member="qa_alltypes.c::SAMPLES_PER_BUFFER" ref="0496f614511efb835b8e80df7a0b18b5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SAMPLES_PER_BUFFER&nbsp;&nbsp;&nbsp;(SAMPLES_PER_FRAME * FRAMES_PER_BUFFER)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="8746ae57f53e99e184ab1e64e71d24c5"></a><!-- doxytag: member="qa_alltypes.c::SAMPLES_PER_FRAME" ref="8746ae57f53e99e184ab1e64e71d24c5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SAMPLES_PER_FRAME&nbsp;&nbsp;&nbsp;(2)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="e536e8c32741d231578be7a34dffca08"></a><!-- doxytag: member="qa_alltypes.c::TALLY_RESULT" ref="e536e8c32741d231578be7a34dffca08" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TALLY_RESULT          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">if</span>( result &lt; 0 ) \
        { \
                <a class="code" href="qa__tools_8c.html#10a8738f8697a83f1446f6a96642f75e" title="Increment internal success counter.">QA_CountError</a>(); \
                <span class="keywordflow">goto</span> error; \
        } \
        <a class="code" href="qa__tools_8c.html#70fcf145a4982592836284808d79f8b0" title="Increment internal success counter.">QA_CountSuccess</a>();
</pre></div>
</div>
</div><p>
<a class="anchor" name="7729c89d21b0350124adfa89538f415f"></a><!-- doxytag: member="qa_alltypes.c::TARGET_ARMDSP" ref="7729c89d21b0350124adfa89538f415f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TARGET_ARMDSP&nbsp;&nbsp;&nbsp;(0)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="923856e3b88a1a5ba1949351b9b232a0"></a><!-- doxytag: member="qa_alltypes.c::TARGET_BLACKFIN" ref="923856e3b88a1a5ba1949351b9b232a0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TARGET_BLACKFIN&nbsp;&nbsp;&nbsp;(0)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="356cf44495ba997a53affcfdb1f386a0"></a><!-- doxytag: member="qa_alltypes.c::TARGET_GENERIC" ref="356cf44495ba997a53affcfdb1f386a0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TARGET_GENERIC&nbsp;&nbsp;&nbsp;(1)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="00d944d54908c5f77d7c34b4967464e6"></a><!-- doxytag: member="qa_alltypes.c::TestResult_t" ref="00d944d54908c5f77d7c34b4967464e6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_test_result__s.html">TestResult_s</a>  <a class="el" href="struct_test_result__s.html">TestResult_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="840291bc02cba5474a4cb46a9b9566fe"></a><!-- doxytag: member="qa_alltypes.c::main" ref="840291bc02cba5474a4cb46a9b9566fe" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="21d599969311fb737cdceae4209da2a5"></a><!-- doxytag: member="qa_alltypes.c::TestAllVoiceTypes" ref="21d599969311fb737cdceae4209da2a5" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int TestAllVoiceTypes           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Generate a few buffers of MIDI and check the min, max and checksum. 
<p>
Test various aspects other aspects of the SPMIDI System. The test will count success and return a positive number if it passes. If an SPMIDI error is encountered, then that large negative error code will be returned. If one the of QA tests fails, eg a checksum, then the current numSuccesses will be returned. This allows one to deduce what part of the test failed from a single return value.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>positive number on success, negative on error </dd></dl>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="6b3b65392e849aa50e1a34ddd122fc45"></a><!-- doxytag: member="qa_alltypes.c::QuickAllTypes" ref="6b3b65392e849aa50e1a34ddd122fc45" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned char <a class="el" href="_quick_all_types_8mxmf_8c.html#6b3b65392e849aa50e1a34ddd122fc45">QuickAllTypes</a>[]          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="20e3e3e87c5869a46e9f042d9bfd3518"></a><!-- doxytag: member="qa_alltypes.c::QuickAllTypes_size" ref="20e3e3e87c5869a46e9f042d9bfd3518" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="_quick_all_types_8mxmf_8c.html#c88dca6cc3a1dcb34c06fced5d80257b">QuickAllTypes_size</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="a411f12301b370a95665045379fdae34"></a><!-- doxytag: member="qa_alltypes.c::samples" ref="a411f12301b370a95665045379fdae34" args="[SAMPLES_PER_BUFFER]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">short <a class="el" href="qa__alltypes_8c.html#a411f12301b370a95665045379fdae34">samples</a>[SAMPLES_PER_BUFFER]          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="78eb8890ba075685412f97c193161010"></a><!-- doxytag: member="qa_alltypes.c::sExpectedResults" ref="78eb8890ba075685412f97c193161010" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_test_result__s.html">TestResult_t</a> <a class="el" href="qa__alltypes_8c.html#78eb8890ba075685412f97c193161010">sExpectedResults</a>[]          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment">
{
        {  3,        0,        0,        0 },
        {  3,   135185,        0,      281 },
        {  3,  3415556,   -11954,    11260 },
        {  3, -7098651,   -15682,    16625 },
        {  3, -2439922,   -16119,    13330 },
}
</pre></div>
</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Oct 9 17:36:46 2007 for SPMIDI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.3 </small></address>
</body>
</html>
