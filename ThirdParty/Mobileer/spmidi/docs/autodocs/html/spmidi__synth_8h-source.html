<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>spmidi.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
<body>
<table WIDTH="100%" cellpadding="2" cellspacing="0" border="2">
<tr>
<td BGCOLOR="#FFF8DD" ><h1 align="center">Mobileer MIDI Synthesizer - Reference Manual</h1>
  <center>
    <h3>CONFIDENTIAL and PROPRIETARY - &copy; 2002-5 <a href="http://www.mobileer.com/">Mobileer</a>,
      All Rights Reserved </h3>
  </center>
</td>
</tr>
</table>
<center>
<h3>
<a href="../../index.html">Return to Mobileer Documentation Home</a>
</h3>
</center>
<!-- Generated by Doxygen 1.3 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>spmidi_synth.h</h1><a href="spmidi__synth_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="preprocessor">#ifndef _SPMIDI_SYNTH_H</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define _SPMIDI_SYNTH_H</span>
00003 <span class="preprocessor"></span>
00004 <span class="comment">/* $Id: spmidi_synth.h,v 1.26 2005/05/23 22:25:38 philjmsl Exp $ */</span>
00016 <span class="preprocessor">#include "<a class="code" href="spmidi__config_8h.html">spmidi_config.h</a>"</span>
00017 <span class="preprocessor">#include "fxpmath.h"</span>
00018 <span class="preprocessor">#include "wave_manager.h"</span>
00019 
00020 <span class="preprocessor">#ifdef __cplusplus</span>
00021 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span>
00022 {
00023 <span class="preprocessor">#endif</span>
00024 <span class="preprocessor"></span>
00025         <span class="comment">/* A BUFFER is made of BLOCKS, which is made of FRAMES */</span>
00026 
00030 <span class="preprocessor">#ifndef SS_FRAMES_PER_BLOCK_LOG2</span>
<a name="l00031"></a><a class="code" href="spmidi__synth_8h.html#a0">00031</a> <span class="preprocessor"></span><span class="preprocessor">#define SS_FRAMES_PER_BLOCK_LOG2    (4)</span>
00032 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00033 <span class="preprocessor"></span>
00034 <span class="preprocessor">#if (SS_FRAMES_PER_BLOCK_LOG2 &lt; 2) || (SS_FRAMES_PER_BLOCK_LOG2 &gt; 4)</span>
00035 <span class="preprocessor"></span><span class="preprocessor">#error SS_FRAMES_PER_BLOCK_LOG2 out of range, must be 2,3 or 4</span>
00036 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00037 <span class="preprocessor"></span>
<a name="l00038"></a><a class="code" href="spmidi__synth_8h.html#a1">00038</a> <span class="preprocessor">#define SS_FRAMES_PER_BLOCK         (1 &lt;&lt; SS_FRAMES_PER_BLOCK_LOG2)</span>
00039 <span class="preprocessor"></span>        <span class="comment">/* TODO - make independant from SS_FRAMES_PER_BLOCK_LOG2. Must modify oscillator loop. */</span>
<a name="l00040"></a><a class="code" href="spmidi__synth_8h.html#a2">00040</a> <span class="preprocessor">#define SS_BLOCKS_PER_BUFFER_LOG2   (SS_FRAMES_PER_BLOCK_LOG2)</span>
<a name="l00041"></a><a class="code" href="spmidi__synth_8h.html#a3">00041</a> <span class="preprocessor"></span><span class="preprocessor">#define SS_BLOCKS_PER_BUFFER        (1 &lt;&lt; SS_BLOCKS_PER_BUFFER_LOG2)</span>
<a name="l00042"></a><a class="code" href="spmidi__synth_8h.html#a4">00042</a> <span class="preprocessor"></span><span class="preprocessor">#define SS_FRAMES_PER_BUFFER        (SS_FRAMES_PER_BLOCK * SS_BLOCKS_PER_BUFFER)</span>
00043 <span class="preprocessor"></span>
<a name="l00045"></a><a class="code" href="spmidi__synth_8h.html#a5">00045</a> <span class="preprocessor">#define SS_FRAMES_PER_CONTROL  (SS_BLOCKS_PER_BUFFER)</span>
<a name="l00046"></a><a class="code" href="spmidi__synth_8h.html#a6">00046</a> <span class="preprocessor"></span><span class="preprocessor">#define SS_FRAMES_PER_CONTROL_LOG2  (SS_FRAMES_PER_BLOCK_LOG2)</span>
00047 <span class="preprocessor"></span>
<a name="l00048"></a><a class="code" href="spmidi__synth_8h.html#a7">00048</a> <span class="preprocessor">#define SPMIDI_FREQUENCY_SHIFT      (15)</span>
<a name="l00049"></a><a class="code" href="spmidi__synth_8h.html#a8">00049</a> <span class="preprocessor"></span><span class="preprocessor">#define SPMIDI_PITCH_SCALAR_SHIFT   (7)</span>
00050 <span class="preprocessor"></span>
<a name="l00051"></a><a class="code" href="spmidi__synth_8h.html#a9">00051</a> <span class="preprocessor">#define SPMIDI_VEQ_SHIFT         (7)</span>
00052 <span class="preprocessor"></span>
<a name="l00053"></a><a class="code" href="spmidi__synth_8h.html#a10">00053</a> <span class="preprocessor">#define SPMIDI_VEQ_BASS_GAIN     ((SPMIDI_VEQ_NOMINAL_GAIN)/2)</span>
00054 <span class="preprocessor"></span>
<a name="l00055"></a><a class="code" href="spmidi__synth_8h.html#a11">00055</a> <span class="preprocessor">#define SPMIDI_VEQ_BASS_CUTOFF   (60)</span>
00056 <span class="preprocessor"></span>
<a name="l00058"></a><a class="code" href="spmidi__synth_8h.html#a12">00058</a> <span class="preprocessor">#define SS_MAX_PRESETS (1&lt;&lt;8)</span>
00059 <span class="preprocessor"></span>
<a name="l00061"></a><a class="code" href="spmidi__synth_8h.html#a13">00061</a>         <span class="keyword">typedef</span> FXP15 <a class="code" href="spmidi__synth_8h.html#a13">SPMIDIFrequency</a>;
00062 
<a name="l00063"></a><a class="code" href="spmidi__synth_8h.html#a14">00063</a>         <span class="keyword">typedef</span> void (SS_AutoStopCallback)( <span class="keywordtype">int</span> voiceIndex, <span class="keywordtype">void</span> *userData );
00064 
00065         <span class="comment">/********************************************************************/</span>
<a name="l00067"></a><a class="code" href="struct_soft_synth__s.html">00067</a>         <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_soft_synth__s.html">SoftSynth_s</a>
00068         {
00070                 int (*<a class="code" href="struct_soft_synth__s.html#m0">SynthesizeBuffer</a>)( <span class="keyword">struct </span><a class="code" href="struct_soft_synth__s.html">SoftSynth_s</a> *synth, void *<a class="code" href="qa__alltypes_8c.html#a12">samples</a>,
00071                                          int samplesPerFrame, int bitsPerSample );
00072 
00074                 int (*<a class="code" href="struct_soft_synth__s.html#m1">EstimateMaxAmplitude</a>)( <span class="keyword">struct </span><a class="code" href="struct_soft_synth__s.html">SoftSynth_s</a> *synth, int samplesPerFrame );
00075 
00076                 <span class="comment">/* Turn on a note so that it contributes to audio mix. */</span>
00077                 void (*<a class="code" href="struct_soft_synth__s.html#m2">NoteOn</a>)( <span class="keyword">struct </span><a class="code" href="struct_soft_synth__s.html">SoftSynth_s</a> *synth, int voiceIndex, int channelIndex,
00078                                 int pitch, int velocity, int pan );
00079 
00080                 <span class="comment">/* Turn off a note so that it will decay and eventually stop. */</span>
00081                 void (*<a class="code" href="struct_soft_synth__s.html#m3">NoteOff</a>)( <span class="keyword">struct </span><a class="code" href="struct_soft_synth__s.html">SoftSynth_s</a> *synth, int voiceIndex );
00082 
00083                 void (*<a class="code" href="struct_soft_synth__s.html#m4">TriggerDrum</a>)( <span class="keyword">struct </span><a class="code" href="struct_soft_synth__s.html">SoftSynth_s</a> *synth, int voiceIndex, int channelIndex,
00084                                      int pitch, int velocity, int pan );
00085 
00091                 void (*<a class="code" href="struct_soft_synth__s.html#m5">SetAutoStopCallback</a>)( <span class="keyword">struct </span><a class="code" href="struct_soft_synth__s.html">SoftSynth_s</a> *synth,
00092                                              <a class="code" href="spmidi__synth_8h.html#a14">SS_AutoStopCallback</a> *autoStopCallback,
00093                                              void *autoStopUserData );
00094 
00096                 void (*<a class="code" href="struct_soft_synth__s.html#m6">StealVoice</a>)( <span class="keyword">struct </span><a class="code" href="struct_soft_synth__s.html">SoftSynth_s</a> *synth, int voiceIndex );
00098                 void (*<a class="code" href="struct_soft_synth__s.html#m7">StifleVoice</a>)( <span class="keyword">struct </span><a class="code" href="struct_soft_synth__s.html">SoftSynth_s</a> *synth, int voiceIndex );
00099 
00100                 void (*<a class="code" href="struct_soft_synth__s.html#m8">SetChannelPitchBend</a>)( <span class="keyword">struct </span><a class="code" href="struct_soft_synth__s.html">SoftSynth_s</a> *synth, int channelIndex, FXP16 semitoneOffset16 );
00101                 void (*<a class="code" href="struct_soft_synth__s.html#m9">SetChannelAftertouch</a>)( <span class="keyword">struct </span><a class="code" href="struct_soft_synth__s.html">SoftSynth_s</a> *synth, int channelIndex, int aftertouch );
00102                 void (*<a class="code" href="struct_soft_synth__s.html#m10">SetChannelTuning</a>)( <span class="keyword">struct </span><a class="code" href="struct_soft_synth__s.html">SoftSynth_s</a> *synth, int channelIndex, FXP16 octaveOffset16 );
00103                 void (*<a class="code" href="struct_soft_synth__s.html#m11">SetChannelBank</a>)( <span class="keyword">struct </span><a class="code" href="struct_soft_synth__s.html">SoftSynth_s</a> *synth, int ci, int b );
00104                 void (*<a class="code" href="struct_soft_synth__s.html#m12">SetChannelProgram</a>)( <span class="keyword">struct </span><a class="code" href="struct_soft_synth__s.html">SoftSynth_s</a> *synth, int channelIndex, int program );
00105 
00106                 void (*<a class="code" href="struct_soft_synth__s.html#m13">SetChannelModDepth</a>)( <span class="keyword">struct </span><a class="code" href="struct_soft_synth__s.html">SoftSynth_s</a> *synth, int channelIndex, int modDepth );
00107                 void (*<a class="code" href="struct_soft_synth__s.html#m14">SetChannelVolume</a>)( <span class="keyword">struct </span><a class="code" href="struct_soft_synth__s.html">SoftSynth_s</a> *synth, int channelIndex, int volume );
00108                 void (*<a class="code" href="struct_soft_synth__s.html#m15">SetChannelExpression</a>)( <span class="keyword">struct </span><a class="code" href="struct_soft_synth__s.html">SoftSynth_s</a> *synth, int channelIndex, int expression );
00109 
00111                 void (*<a class="code" href="struct_soft_synth__s.html#m16">SetMasterVolume</a>)( <span class="keyword">struct </span><a class="code" href="struct_soft_synth__s.html">SoftSynth_s</a> *synth, FXP7 masterVolume );
00112 
00113 
00117                 void (*<a class="code" href="struct_soft_synth__s.html#m17">AllSoundOff</a>)( <span class="keyword">struct </span><a class="code" href="struct_soft_synth__s.html">SoftSynth_s</a> *synth, int channelIndex );
00118 
00123                 void (*<a class="code" href="struct_soft_synth__s.html#m18">SetGeneralMIDIMode</a>)( <span class="keyword">struct </span><a class="code" href="struct_soft_synth__s.html">SoftSynth_s</a> *synth, int isOn );
00124 
00125 
00130                 int (*<a class="code" href="struct_soft_synth__s.html#m19">SetParameter</a>)( <span class="keyword">struct </span><a class="code" href="struct_soft_synth__s.html">SoftSynth_s</a> *synth, <a class="code" href="spmidi_8h.html#a12">SPMIDI_Parameter</a> parameterIndex, int value );
00131 
00135                 int (*<a class="code" href="struct_soft_synth__s.html#m20">GetParameter</a>)( <span class="keyword">struct </span><a class="code" href="struct_soft_synth__s.html">SoftSynth_s</a> *synth, <a class="code" href="spmidi_8h.html#a12">SPMIDI_Parameter</a> parameterIndex, int *valuePtr );
00136 
<a name="l00138"></a><a class="code" href="struct_soft_synth__s.html#m21">00138</a>                 <span class="keywordtype">short</span>           <a class="code" href="struct_soft_synth__s.html#m21">veqGainAtZero</a>;
<a name="l00140"></a><a class="code" href="struct_soft_synth__s.html#m22">00140</a>                 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   <a class="code" href="struct_soft_synth__s.html#m22">veqBassCutoff</a>;
00141 
<a name="l00142"></a><a class="code" href="struct_soft_synth__s.html#m23">00142</a>                 FXP7            masterVolume;
<a name="l00143"></a><a class="code" href="struct_soft_synth__s.html#m24">00143</a>                 FXP7            <a class="code" href="struct_soft_synth__s.html#m24">rhythmVolume</a>;
00144 
00145         }
00146         <a class="code" href="struct_soft_synth__s.html">SoftSynth</a>;
00147 
00148         <span class="comment">/********************************************************************/</span>
00149 
00153         <span class="keywordtype">int</span> <a class="code" href="spmidi__synth_8h.html#a16">SS_Initialize</a>( <span class="keywordtype">void</span> );
00154 
00157         <span class="keywordtype">int</span> <a class="code" href="spmidi__synth_8h.html#a17">SS_Terminate</a>( <span class="keywordtype">void</span> );
00158 
00159 
00160         <span class="comment">/* Create a context for synthesis. */</span>
00161         <span class="keywordtype">int</span> <a class="code" href="spmidi__synth_8h.html#a18">SS_CreateSynth</a>( <a class="code" href="struct_soft_synth__s.html">SoftSynth</a> **synthPtr, <span class="keywordtype">int</span> sampleRate );
00162         <span class="comment">/* Delete context for synthesis. */</span>
00163         <span class="keywordtype">int</span> <a class="code" href="spmidi__synth_8h.html#a19">SS_DeleteSynth</a>( <a class="code" href="struct_soft_synth__s.html">SoftSynth</a> *synth );
00164 
00168         <span class="keywordtype">int</span> <a class="code" href="spmidi__synth_8h.html#a20">SS_SetInstrumentDefinition</a>( <a class="code" href="struct_soft_synth__s.html">SoftSynth</a> *synth, <span class="keywordtype">int</span> insIndex, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data, <span class="keywordtype">int</span> numBytes );
00169 
00173         <span class="keywordtype">int</span> <a class="code" href="spmidi__synth_8h.html#a21">SS_SetInstrumentMap</a>( <a class="code" href="struct_soft_synth__s.html">SoftSynth</a> *synth, <span class="keywordtype">int</span> programIndex, <span class="keywordtype">int</span> insIndex );
00174 
00178         <span class="keywordtype">int</span> <a class="code" href="spmidi__synth_8h.html#a22">SS_SetDrumMap</a>( <a class="code" href="struct_soft_synth__s.html">SoftSynth</a> *synth, <span class="keywordtype">int</span> noteIndex, <span class="keywordtype">int</span> insIndex, <span class="keywordtype">int</span> pitch );
00179 
00180 
00181 <span class="preprocessor">#if SPMIDI_ME2000</span>
00182 <span class="preprocessor"></span>
00187         <span class="keywordtype">int</span> SS_LoadWaveTable( <a class="code" href="struct_soft_synth__s.html">SoftSynth</a> *synth, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data, <span class="keywordtype">int</span> numBytes );
00188 
00189         <span class="comment">/* Delete WaveTable if WaveSet reference count is zero. */</span>
00190         <span class="keywordtype">int</span> SS_UnloadWaveTable( <a class="code" href="struct_soft_synth__s.html">SoftSynth</a> *synth, spmSInt32 token );
00191 
00196         <span class="keywordtype">int</span> SS_LoadWaveSet( <a class="code" href="struct_soft_synth__s.html">SoftSynth</a> *synth, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data, <span class="keywordtype">int</span> numBytes );
00197 
00198         <span class="comment">/* Delete WaveSet if instrument reference count is zero. */</span>
00199         <span class="keywordtype">int</span> SS_UnloadWaveSet( <a class="code" href="struct_soft_synth__s.html">SoftSynth</a> *synth, spmSInt32 token );
00200 
00201         <span class="keywordtype">int</span> SS_UnloadAllWaveData( <a class="code" href="struct_soft_synth__s.html">SoftSynth</a> *synth );
00202 
00203 <span class="preprocessor">#endif </span><span class="comment">/* SPMIDI_ME2000 */</span>
00204 
00205 <span class="preprocessor">#if (SPMIDI_SUPPORT_EDITING || SPMIDI_ME3000)</span>
00206 <span class="preprocessor"></span>
00209         <span class="keywordtype">int</span> SS_AddWaveTable( <a class="code" href="struct_soft_synth__s.html">SoftSynth</a> *synth, WaveTable_t *waveTable );
00210         <span class="keywordtype">int</span> SS_AddWaveSet( <a class="code" href="struct_soft_synth__s.html">SoftSynth</a> *synth, WaveSet_t *waveSet, <span class="keywordtype">int</span> id );
00211 
00212 
00213 <span class="preprocessor">#endif</span>
00214 <span class="preprocessor"></span>
00215 
00216 <span class="preprocessor">#ifdef __cplusplus</span>
00217 <span class="preprocessor"></span>}
00218 <span class="preprocessor">#endif</span>
00219 <span class="preprocessor"></span>
00220 <span class="preprocessor">#endif </span><span class="comment">/* _SPMIDI_SYNTH_H */</span>
00221 
</pre></div><hr><address style="align: right;"><small>Generated on Fri Jun 17 03:11:38 2005 for SPMIDI by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3 </small></address>
</body>
</html>
