#-----------------------------------------------------------------------------
# Brio/ThirdParty Repository
#-----------------------------------------------------------------------------
import os.path
import glob
Import('*')

#-----------------------------------------------------------------------------
# Populate the "XBuild" or "Publish" folders
#-----------------------------------------------------------------------------
#FIXME/tp: Export boost stuff without SVN subfolders
if vars['is_export']:
	inc_dir = os.path.join(vars['hdr_deploy_dir'], 'boost')
	Command(inc_dir, 'boost/boost', Copy("$TARGET", "$SOURCE"))

	if vars['is_emulation']:
		inc_dir = os.path.join(vars['hdr_deploy_dir'], 'OpenGL', vars['target_subdir'])
		lib_dir = os.path.join(vars['mpi_deploy_dir'], '..', 'OpenGL')
		headers = os.path.join('PowerVR', 'Include')
		Command(inc_dir, headers, Copy("$TARGET", "$SOURCE"))
		#	libs = glob.glob(os.path.join('PowerVR', 'Libs', '*.so'))
		core_name = 'libgles_cl.so'
		lib = os.path.join('PowerVR', 'Libs', core_name)
		env.Install(lib_dir, lib)
		lib += '.0'
		env.Install(lib_dir, lib)
	else:
		inc_dir = os.path.join(vars['hdr_deploy_dir'], 'OpenGL', vars['target_subdir'])
		lib_dir = os.path.join(vars['mpi_deploy_dir'], '..', 'OpenGL')
		headers = os.path.join('MagicEyes', 'Include')
		Command(inc_dir, headers, Copy("$TARGET", "$SOURCE"))
		core_name = 'libogl.a'
		lib = os.path.join('MagicEyes', 'Libs', 'arm', core_name)
		env.Install(lib_dir, lib)
